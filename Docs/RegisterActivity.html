
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<title>Ú¯Ø²Ø§Ø±Ø´ Ù¾ÛŒØ´Ø±ÙØª ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø²Ø¨Ø§Ù†</title>
<style>
:root {
    --primary-color: #2c3e50;
    --secondary-color: #3498db;
    --accent-color: #e74c3c;
    --success-color: #27ae60;
    --warning-color: #f39c12;
    --background-color: #f8f9fa;
    --card-color: #ffffff;
    --header-height: 70px;
}

body {
    font-family: "Segoe UI Emoji", Tahoma, sans-serif;
    margin:0;
    padding:10px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    min-height: 100vh;
    padding-top: calc(var(--header-height) + 20px);
}

/* Ù†ÙˆØ§Ø± Ø¹Ù†ÙˆØ§Ù† Ø«Ø§Ø¨Øª */
.fixed-header {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: var(--header-height);
    background: linear-gradient(135deg, var(--primary-color), #1a252f);
    color: white;
    z-index: 1000;
    padding: 0 20px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    display: flex;
    align-items: center;
    justify-content: space-between;
    backdrop-filter: blur(10px);
}

.header-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
}

.report-title {
    display: flex;
    align-items: center;
    gap: 15px;
}

.report-icon {
    font-size: 1.8em;
    background: rgba(255, 255, 255, 0.15);
    width: 45px;
    height: 45px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    backdrop-filter: blur(10px);
}

.report-title-text h2 {
    font-size: 1.3em;
    margin-bottom: 3px;
}

.report-subtitle {
    font-size: 0.85em;
    opacity: 0.9;
}

.back-to-index-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    background: linear-gradient(135deg, var(--accent-color), #c0392b);
    color: white;
    text-decoration: none;
    padding: 12px 25px;
    border-radius: 30px;
    font-weight: bold;
    transition: all 0.3s ease;
    border: 1px solid rgba(255, 255, 255, 0.2);
    min-width: 180px;
    justify-content: center;
    box-shadow: 0 5px 15px rgba(231, 76, 60, 0.3);
}

.back-to-index-btn:hover {
    background: linear-gradient(135deg, #d63031, #b33939);
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(231, 76, 60, 0.4);
}

.container {
    max-width:950px;
    margin:20px auto;
    background:rgba(255, 255, 255, 0.95);
    padding:20px;
    border-radius:15px;
    box-shadow:0 15px 40px rgba(0, 0, 0, 0.2);
    margin-top: 20px;
}
h1 { 
    text-align:center;
    color: var(--primary-color);
    margin-bottom:25px;
    padding-bottom:15px;
    border-bottom:3px solid var(--secondary-color);
}

.form-row {
    display:flex;
    align-items:center;
    flex-wrap:wrap;
    gap:12px;
    margin-bottom:15px;
    background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
    padding:15px;
    border-radius:10px;
    border-right:4px solid var(--secondary-color);
}
.form-row label { 
    white-space:nowrap;
    font-weight:bold;
    color: var(--primary-color);
}

select, input[type="number"], input[type="date"] {
    padding:8px 12px;
    border-radius:8px;
    border:2px solid #ddd;
    background:white;
    font-family: "Segoe UI Emoji", Tahoma, sans-serif;
    font-size:14px;
    transition: all 0.3s;
}
select:focus, input[type="number"]:focus, input[type="date"]:focus {
    border-color: var(--secondary-color);
    outline:none;
    box-shadow:0 0 5px rgba(52, 152, 219, 0.3);
}

.activity-box, .exercise-box {
    border:2px solid #e9ecef;
    border-radius:12px;
    padding:15px;
    margin-bottom:20px;
    display:flex;
    flex-direction:column;
    gap:8px;
    flex:1;
    min-height:400px;
    background: var(--card-color);
    box-shadow:0 5px 15px rgba(0, 0, 0, 0.05);
    transition: all 0.3s;
}
.activity-box:hover, .exercise-box:hover {
    border-color: var(--secondary-color);
    box-shadow:0 8px 25px rgba(0, 0, 0, 0.1);
}

.row-container { 
    display:flex; 
    gap:15px; 
    align-items:stretch;
    margin:20px 0;
}

.checkbox-row {
    display:flex;
    align-items:center;
    justify-content:space-between;
    padding:10px;
    border-radius:8px;
    transition: all 0.2s;
    background: #f8f9fa;
}
.checkbox-row:hover {
    background: #e9ecef;
    transform: translateX(-3px);
}

.checkbox-row .time-container {
    display:flex;
    align-items:center;
    gap:4px;
}

.checkbox-row .content-container {
    display:flex;
    align-items:center;
    gap:8px;
}

.checkbox-row input[type="number"] { 
    width:70px;
    text-align:center;
}
.minute-label { 
    font-size:12px; 
    color:#6c757d;
}

button {
    font-family: Tahoma, sans-serif;
    margin-top:10px;
    padding:10px 20px;
    font-size:15px;
    border-radius:30px;
    border:none;
    cursor:pointer;
    font-weight:bold;
    height:42px;
    transition: all 0.3s;
    min-width:120px;
    display:inline-flex;
    align-items:center;
    justify-content:center;
    gap:8px;
}

#uploadFile { 
    display:none;
}

#chart-container { 
    margin-top:25px; 
    flex-basis:100%;
    background:white;
    padding:20px;
    border-radius:12px;
    box-shadow:0 8px 20px rgba(0,0,0,0.08);
    border:2px solid #e9ecef;
}

#saveBtn { 
    background: linear-gradient(135deg, var(--success-color), #219653);
    color:white;
    box-shadow:0 5px 15px rgba(39, 174, 96, 0.3);
}
#saveBtn:hover {
    transform: translateY(-3px);
    box-shadow:0 8px 20px rgba(39, 174, 96, 0.4);
}

#clearBtn { 
    background: linear-gradient(135deg, var(--accent-color), #c0392b);
    color:white;
    box-shadow:0 5px 15px rgba(231, 76, 60, 0.3);
}
#clearBtn:hover {
    transform: translateY(-3px);
    box-shadow:0 8px 20px rgba(231, 76, 60, 0.4);
}

#downloadBtn { 
    background: linear-gradient(135deg, var(--secondary-color), #2980b9);
    color:white;
    box-shadow:0 5px 15px rgba(52, 152, 219, 0.3);
}
#downloadBtn:hover {
    transform: translateY(-3px);
    box-shadow:0 8px 20px rgba(52, 152, 219, 0.4);
}

#uploadBtn { 
    background: linear-gradient(135deg, #9D4EDD, #7B2CBF);
    color:white;
    box-shadow:0 5px 15px rgba(157, 78, 221, 0.3);
}
#uploadBtn:hover {
    transform: translateY(-3px);
    box-shadow:0 8px 20px rgba(157, 78, 221, 0.4);
}

#weeklyBtn { 
    background: linear-gradient(135deg, #FF9F1C, #FF7F11);
    color:white;
    box-shadow:0 5px 15px rgba(255, 159, 28, 0.3);
}
#weeklyBtn:hover {
    transform: translateY(-3px);
    box-shadow:0 8px 20px rgba(255, 159, 28, 0.4);
}

#monthlyBtn { 
    background: linear-gradient(135deg, #FFD700, #FFA500);
    color:#333;
    box-shadow:0 5px 15px rgba(255, 215, 0, 0.3);
}
#monthlyBtn:hover {
    transform: translateY(-3px);
    box-shadow:0 8px 20px rgba(255, 215, 0, 0.4);
}

#allBtn { 
    background: linear-gradient(135deg, #9b59b6, #8e44ad);
    color:white;
    box-shadow:0 5px 15px rgba(155, 89, 182, 0.3);
}
#allBtn:hover {
    transform: translateY(-3px);
    box-shadow:0 8px 20px rgba(155, 89, 182, 0.4);
}

.button-group { 
    display:flex;
    align-items:center;
    gap:15px;
    flex-wrap:wrap;
    margin-bottom:15px;
    justify-content:center;
}
.button-row { 
    display:flex; 
    gap:15px; 
    flex-wrap:wrap; 
    margin-bottom:15px; 
    align-items:center;
    justify-content:center;
}
.section-title { 
    font-weight:bold; 
    margin-bottom:10px;
    color: var(--primary-color);
    font-size:1.2em;
    padding-bottom:5px;
    border-bottom:2px solid var(--secondary-color);
    display:inline-block;
}

#chart-info { 
    text-align:center; 
    font-weight:bold; 
    margin-top:15px;
    padding:10px;
    background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
    border-radius:10px;
    color: var(--primary-color);
    border-right:4px solid var(--secondary-color);
}

/* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ Ø¯Ø± Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ */
button span {
    font-size:1.2em;
}

/* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ ØªØ§ÛŒØªÙ„â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ú©Ø³ */
.activity-box-wrapper h3, .exercise-box-wrapper h3 {
    color: var(--primary-color);
    background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
    padding:10px 15px;
    border-radius:10px 10px 0 0;
    margin:0;
    border-bottom:3px solid var(--secondary-color);
}

/* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ú†Ú©â€ŒØ¨Ø§Ú©Ø³ */
input[type="checkbox"] {
    width:18px;
    height:18px;
    cursor:pointer;
    accent-color: var(--secondary-color);
}

/* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ ÙˆÙ‚ØªÛŒ Ú©Ù‡ Ú†Ú©â€ŒØ¨Ø§Ú©Ø³ ÙØ¹Ø§Ù„ Ø§Ø³Øª */
.checkbox-row input[type="checkbox"]:checked + span + label {
    font-weight:bold;
    color: var(--primary-color);
}

/* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ Ø¯Ø± Ù…ÙˆØ¨Ø§ÛŒÙ„ */
@media (max-width: 1024px) {
    .header-content {
        flex-direction: column;
        gap: 15px;
        padding: 10px 0;
    }
    
    .report-title {
        flex-direction: column;
        text-align: center;
        gap: 10px;
    }
    
    .back-to-index-btn {
        min-width: 160px;
        padding: 10px 20px;
        font-size: 0.95em;
    }
    
    body {
        padding-top: calc(var(--header-height) + 80px);
    }
}

@media (max-width: 768px) {
    .fixed-header {
        height: auto;
        padding: 10px;
    }
    
    .header-content {
        flex-direction: column;
        gap: 15px;
    }
    
    .report-title {
        flex-direction: column;
        text-align: center;
        gap: 10px;
    }
    
    .back-to-index-btn {
        width: 100%;
        max-width: 300px;
    }
    
    body {
        padding-top: 150px;
    }
    
    .row-container {
        flex-direction:column;
    }
    
    .button-row, .button-group {
        flex-direction:column;
        align-items:stretch;
    }
    
    button, .chart-select-container {
        width:100%;
        margin-top:5px;
    }
    
    .form-row {
        flex-direction:column;
        align-items:flex-start;
    }
    
    select, input[type="number"], input[type="date"] {
        width:100%;
    }
    
    .chart-select-container select {
        width:100%;
    }
}

/* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù†ØªÛŒÙ†Ø± Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù…ÙˆØ¯Ø§Ø± */
.chart-select-container {
    display:flex;
    align-items:center;
    gap:10px;
    margin-top:10px;
}

.chart-select-container label {
    white-space:nowrap;
    font-weight:bold;
    color: var(--primary-color);
}

.chart-select-container select {
    min-width:200px;
    padding:8px 12px;
    border-radius:8px;
    border:2px solid #ddd;
    background:white;
    font-family: "Segoe UI Emoji", Tahoma, sans-serif;
    font-size:14px;
}

/* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ø®Ø·ÙˆØ· Ù†Ù…ÙˆØ¯Ø§Ø± Ø§Ø¶Ø§ÙÛŒ */
.chart-line-item {
    margin-right:20px;
    display:inline-flex;
    align-items:center;
    gap:5px;
    margin-top:5px;
}

.chart-line-color {
    width:15px;
    height:15px;
    border-radius:3px;
    display:inline-block;
}

/* Ù†Ù…Ø§ÛŒØ´ Ø§Ù†ØªØ®Ø§Ø¨â€ŒÙ‡Ø§ÛŒ Ù†Ù…ÙˆØ¯Ø§Ø± */
.selected-charts {
    margin-top:15px;
    padding:10px;
    background:#f8f9fa;
    border-radius:8px;
    border:1px solid #dee2e6;
}

.selected-charts h4 {
    margin:0 0 10px 0;
    color: var(--primary-color);
}

.chart-tag {
    display:inline-flex;
    align-items:center;
    gap:5px;
    background:var(--secondary-color);
    color:white;
    padding:5px 10px;
    border-radius:15px;
    margin:0 5px 5px 0;
    font-size:0.9em;
}

.chart-tag button {
    background:none;
    border:none;
    color:white;
    font-size:1.2em;
    padding:0;
    margin:0;
    height:auto;
    min-width:auto;
    cursor:pointer;
}

.chart-tag button:hover {
    color:#ffeb3b;
}

/* Ø§Ø³ØªØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ Ú†Ú©â€ŒØ¨Ø§Ú©Ø³ ØºÛŒØ±ÙØ¹Ø§Ù„ */
.checkbox-row input[type="checkbox"]:not(:checked) + span + label {
    opacity:0.7;
}
</style>
</head>
<body>
<!-- Ù†ÙˆØ§Ø± Ø¹Ù†ÙˆØ§Ù† Ø«Ø§Ø¨Øª -->
<div class="fixed-header">
    <div class="header-content">
        <div class="report-title">
            <div class="report-icon">ğŸ“Š</div>
            <div class="report-title-text">
                <h2>Ú¯Ø²Ø§Ø±Ø´ Ù¾ÛŒØ´Ø±ÙØª ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø²Ø¨Ø§Ù†</h2>
                <div class="report-subtitle">Ø«Ø¨Øª Ùˆ ØªØ­Ù„ÛŒÙ„ Ø±ÙˆØ²Ø§Ù†Ù‡ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ</div>
            </div>
        </div>
        
        <a href="../PIONAN Deutsch Course_index.html" class="back-to-index-btn" title="Back to Index">
            <span>â†</span>
            <span>Back to Index</span>
        </a>
    </div>
</div>

<div class="container">
<h1>ğŸ“Š Ú¯Ø²Ø§Ø±Ø´ Ù¾ÛŒØ´Ø±ÙØª ÛŒØ§Ø¯Ú¯ÛŒØ±ÛŒ Ø²Ø¨Ø§Ù†</h1>

<div class="form-row">
    <label for="language">Ø²Ø¨Ø§Ù† Ù‡Ø¯Ù:</label>
    <select id="language">
        <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
        <option>Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ</option><option>Ø§Ø³Ù¾Ø§Ù†ÛŒØ§ÛŒÛŒ</option><option>Ø¢Ù„Ù…Ø§Ù†ÛŒ</option>
        <option>ÙØ±Ø§Ù†Ø³ÙˆÛŒ</option><option>Ø±ÙˆØ³ÛŒ</option><option>Ú†ÛŒÙ†ÛŒ</option>
        <option>Ù¾Ø±ØªØºØ§Ù„ÛŒ</option><option>Ø¹Ø±Ø¨ÛŒ</option><option>ØªØ±Ú©ÛŒ</option>
    </select>

    <label for="level">Ø³Ø·Ø­:</label>
    <select id="level">
        <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</option>
        <option>A1.1</option><option>A1.2</option><option>A2.1</option><option>A2.2</option>
        <option>B1.1</option><option>B1.2</option><option>B2.1</option><option>B2.2</option>
        <option>C1.1</option><option>C1.2</option>
    </select>

    <label for="dailyTarget">Ù‡Ø¯Ù Ø±ÙˆØ²Ø§Ù†Ù‡:</label>
    <input type="number" id="dailyTarget" min="1" value="60">
</div>

<div class="form-row">
    <input type="checkbox" id="pastDateChk">
    <label for="pastDateChk">Ø«Ø¨Øª Ø¨Ø±Ø§ÛŒ ØªØ§Ø±ÛŒØ® Ú¯Ø°Ø´ØªÙ‡</label>
    <input type="date" id="pastDate" disabled>
</div>

<div class="row-container">
    <div class="activity-box-wrapper" style="flex:1; display:flex; flex-direction:column;">
        <h3 class="section-title">ğŸ“ˆ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§</h3>
        <div class="activity-box" id="activities">
            <div class="checkbox-row"><div class="content-container"><input type="checkbox"><span>ğŸ§</span><label>Ú¯ÙˆØ´ Ø¯Ø§Ø¯Ù†</label></div><div class="time-container"><input type="number" min="0" value="0"><span class="minute-label">Ø¯Ù‚ÛŒÙ‚Ù‡</span></div></div>
            <div class="checkbox-row"><div class="content-container"><input type="checkbox"><span>ğŸ“–</span><label>Ø¯Ø±Ú© Ù…Ø·Ù„Ø¨</label></div><div class="time-container"><input type="number" min="0" value="0"><span class="minute-label">Ø¯Ù‚ÛŒÙ‚Ù‡</span></div></div>
            <div class="checkbox-row"><div class="content-container"><input type="checkbox"><span>ğŸ—£</span><label>Ø²Ù…Ø²Ù…Ù‡ Ø¯Ø± Ú©Ù†Ø§Ø± ØµØ¯Ø§ÛŒ Ú¯ÙˆÛŒÙ†Ø¯Ù‡</label></div><div class="time-container"><input type="number" min="0" value="0"><span class="minute-label">Ø¯Ù‚ÛŒÙ‚Ù‡</span></div></div>
            <div class="checkbox-row"><div class="content-container"><input type="checkbox"><span>ğŸ“¢</span><label>Ø¨Ù„Ù†Ø¯ Ø®ÙˆØ§Ù†Ø¯Ù† Ùˆ Ø¶Ø¨Ø· ØµØ¯Ø§</label></div><div class="time-container"><input type="number" min="0" value="0"><span class="minute-label">Ø¯Ù‚ÛŒÙ‚Ù‡</span></div></div>
        </div>
    </div>

    <div class="exercise-box-wrapper" style="flex:1; display:flex; flex-direction:column;">
        <h3 class="section-title">ğŸ“ ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§</h3>
        <div class="exercise-box" id="exercises">
            <div class="checkbox-row"><div class="content-container"><input type="checkbox"><span>â“</span><label>Ø³ÙˆØ§Ù„Ø§Øª Ø¯Ø±Ú© Ù…Ø·Ù„Ø¨</label></div><div class="time-container"><input type="number" min="0" value="0"><span class="minute-label">Ø¯Ù‚ÛŒÙ‚Ù‡</span></div></div>
            <div class="checkbox-row"><div class="content-container"><input type="checkbox"><span>ğŸ“š</span><label>Ø³ÙˆØ§Ù„Ø§Øª Ú¯Ø±Ø§Ù…Ø± Ú©Ù„ÛŒØ¯ÛŒ</label></div><div class="time-container"><input type="number" min="0" value="0"><span class="minute-label">Ø¯Ù‚ÛŒÙ‚Ù‡</span></div></div>
            <div class="checkbox-row"><div class="content-container"><input type="checkbox"><span>ğŸ’¬</span><label>Ù…Ú©Ø§Ù„Ù…Ù‡</label></div><div class="time-container"><input type="number" min="0" value="0"><span class="minute-label">Ø¯Ù‚ÛŒÙ‚Ù‡</span></div></div>
            <div class="checkbox-row"><div class="content-container"><input type="checkbox"><span>âœï¸</span><label>Ù†ÙˆØ´ØªÙ†</label></div><div class="time-container"><input type="number" min="0" value="0"><span class="minute-label">Ø¯Ù‚ÛŒÙ‚Ù‡</span></div></div>
        </div>
    </div>
</div>

<div class="button-row">
    <button id="saveBtn" onclick="saveData()"><span>ğŸ’¾</span> Ø«Ø¨Øª Ùˆ Ù†Ù…Ø§ÛŒØ´ Ù†Ù…ÙˆØ¯Ø§Ø±</button>
    <button id="downloadBtn" onclick="downloadCSV()"><span>ğŸ“¥</span> Ø®Ø±ÙˆØ¬ÛŒ CSV</button>
    <button id="clearBtn" onclick="clearData()"><span>ğŸ—‘ï¸</span> Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</button>
    <button id="uploadBtn" onclick="document.getElementById('uploadFile').click()"><span>ğŸ“¤</span> Ø¢Ù¾Ù„ÙˆØ¯ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§</button>
    <input type="file" id="uploadFile" accept=".csv" onchange="uploadData()">
</div>

<div class="button-group">
    <div class="chart-select-container">
        <label for="chartSelect">Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù…ÙˆØ¯Ø§Ø±:</label>
        <select id="chartSelect" onchange="addSelectedChart()">
            <option value="">Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯...</option>
            <option value="listening">ğŸ§ Ú¯ÙˆØ´ Ø¯Ø§Ø¯Ù†</option>
            <option value="reading">ğŸ“– Ø¯Ø±Ú© Ù…Ø·Ù„Ø¨</option>
            <option value="whispering">ğŸ—£ Ø²Ù…Ø²Ù…Ù‡</option>
            <option value="recording">ğŸ“¢ Ø¨Ù„Ù†Ø¯ Ø®ÙˆØ§Ù†Ø¯Ù†</option>
            <option value="comprehension">â“ Ø³ÙˆØ§Ù„Ø§Øª Ø¯Ø±Ú© Ù…Ø·Ù„Ø¨</option>
            <option value="grammar">ğŸ“š Ø³ÙˆØ§Ù„Ø§Øª Ú¯Ø±Ø§Ù…Ø±</option>
            <option value="conversation">ğŸ’¬ Ù…Ú©Ø§Ù„Ù…Ù‡</option>
            <option value="writing">âœï¸ Ù†ÙˆØ´ØªÙ†</option>
        </select>
    </div>
    <button id="weeklyBtn" onclick="updateChart('weekly')"><span>ğŸ“…</span> Ù‡ÙØªÚ¯ÛŒ</button>
    <button id="monthlyBtn" onclick="updateChart('monthly')"><span>ğŸ“†</span> Ù…Ø§Ù‡Ø§Ù†Ù‡</button>
    <button id="allBtn" onclick="updateChart('all')"><span>ğŸ“Š</span> Ú©Ù„</button>
</div>

<div id="selected-charts-container" class="selected-charts" style="display:none;">
    <h4>Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡:</h4>
    <div id="selected-charts-list"></div>
</div>

<div id="chart-info"></div>
<div id="chart-container">
    <canvas id="progressChart"></canvas>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
const languageEl=document.getElementById("language");
const levelEl=document.getElementById("level");
const dailyTargetEl=document.getElementById("dailyTarget");
const pastDateChkEl=document.getElementById("pastDateChk");
const pastDateEl=document.getElementById("pastDate");
const chartInfo=document.getElementById("chart-info");
const chartSelectEl=document.getElementById("chartSelect");
const selectedChartsContainer = document.getElementById("selected-charts-container");
const selectedChartsList = document.getElementById("selected-charts-list");

// Ù†Ø§Ù…â€ŒÙ‡Ø§ÛŒ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§ Ùˆ ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§ Ø¨Ø±Ø§ÛŒ Ù†Ù…ÙˆØ¯Ø§Ø± Ùˆ CSV
const activityNames = [
    "Ú¯ÙˆØ´ Ø¯Ø§Ø¯Ù†",
    "Ø¯Ø±Ú© Ù…Ø·Ù„Ø¨", 
    "Ø²Ù…Ø²Ù…Ù‡ Ø¯Ø± Ú©Ù†Ø§Ø± ØµØ¯Ø§ÛŒ Ú¯ÙˆÛŒÙ†Ø¯Ù‡",
    "Ø¨Ù„Ù†Ø¯ Ø®ÙˆØ§Ù†Ø¯Ù† Ùˆ Ø¶Ø¨Ø· ØµØ¯Ø§"
];

const exerciseNames = [
    "Ø³ÙˆØ§Ù„Ø§Øª Ø¯Ø±Ú© Ù…Ø·Ù„Ø¨",
    "Ø³ÙˆØ§Ù„Ø§Øª Ú¯Ø±Ø§Ù…Ø± Ú©Ù„ÛŒØ¯ÛŒ",
    "Ù…Ú©Ø§Ù„Ù…Ù‡",
    "Ù†ÙˆØ´ØªÙ†"
];

// Ø±Ù†Ú¯â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ø¨Ø±Ø§ÛŒ Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§
const chartColors = {
    "total": "#3498db",
    "target": "#c0392b",
    "listening": "#1abc9c",
    "reading": "#2ecc71",
    "whispering": "#9b59b6",
    "recording": "#34495e",
    "comprehension": "#e74c3c",
    "grammar": "#f39c12",
    "conversation": "#16a085",
    "writing": "#8e44ad"
};

// Ù„ÛŒØ³Øª Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±
let selectedCharts = [];

pastDateChkEl.addEventListener("change",function(){ pastDateEl.disabled=!this.checked; });

// Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ - Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø¹Ø¯Ø¯ÛŒ 0 Ù‡Ø³ØªÙ†Ø¯
document.querySelectorAll('.checkbox-row').forEach(row=>{
    const chk=row.querySelector('.content-container input[type=checkbox]');
    const num=row.querySelector('.time-container input[type=number]');
    
    // Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´ÙØ±Ø¶ 0 Ø¨Ø±Ø§ÛŒ Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§
    num.value = 0;
    num.disabled = false; // Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ ÙØ¹Ø§Ù„ Ù‡Ø³ØªÙ†Ø¯
    
    chk.addEventListener('change',()=>{
        // Ø§Ú¯Ø± Ú†Ú©â€ŒØ¨Ø§Ú©Ø³ ØªÛŒÚ© Ù†Ø®ÙˆØ±Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ù…Ù‚Ø¯Ø§Ø± Ø±Ø§ 0 Ù†Ú¯Ù‡ Ø¯Ø§Ø± Ø§Ù…Ø§ ÙÛŒÙ„Ø¯ ÙØ¹Ø§Ù„ Ø¨Ù…Ø§Ù†Ø¯
        if(!chk.checked) {
            num.value = 0;
        }
    });
    
    num.addEventListener('input',()=>{ 
        if(num.value<0||isNaN(num.value)) num.value=0; 
    });
});

let savedData=JSON.parse(localStorage.getItem("progressData")||"[]");
let currentChartPeriod='weekly';

function saveData(){
    const lang = languageEl.value;
    const levelVal = levelEl.value;
    if(!lang || !levelVal){ alert("Ù„Ø·ÙØ§Ù‹ Ø²Ø¨Ø§Ù† Ùˆ Ø³Ø·Ø­ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯"); return; }

    const dateVal = pastDateChkEl.checked ? pastDateEl.value : new Date().toISOString().split('T')[0];
    if(pastDateChkEl.checked && !dateVal){ alert("Ù„Ø·ÙØ§Ù‹ ØªØ§Ø±ÛŒØ® Ú¯Ø°Ø´ØªÙ‡ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"); return; }

    const dailyTargetVal = parseInt(dailyTargetEl.value) || 60;

    // Ø®ÙˆØ§Ù†Ø¯Ù† ØªÙ…Ø§Ù… Ù…Ù‚Ø§Ø¯ÛŒØ± (ÙØ¹Ø§Ù„ ÛŒØ§ ØºÛŒØ±ÙØ¹Ø§Ù„)
    const activities=[...document.querySelectorAll("#activities .checkbox-row")].map(r=>{
        const val=parseInt(r.querySelector('.time-container input[type=number]').value)||0;
        return val; // Ù‡Ù…ÛŒØ´Ù‡ Ù…Ù‚Ø¯Ø§Ø± Ø±Ø§ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†ØŒ Ø­ØªÛŒ Ø§Ú¯Ø± 0 Ø¨Ø§Ø´Ø¯
    });

    const exercises=[...document.querySelectorAll("#exercises .checkbox-row")].map(r=>{
        const val=parseInt(r.querySelector('.time-container input[type=number]').value)||0;
        return val; // Ù‡Ù…ÛŒØ´Ù‡ Ù…Ù‚Ø¯Ø§Ø± Ø±Ø§ Ø¨Ø±Ú¯Ø±Ø¯Ø§Ù†ØŒ Ø­ØªÛŒ Ø§Ú¯Ø± 0 Ø¨Ø§Ø´Ø¯
    });

    const total=activities.reduce((a,b)=>a+b,0)+exercises.reduce((a,b)=>a+b,0);

    // Ø­Ø°Ù Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ
    savedData=savedData.filter(d=>!(d.Date===dateVal && d.Language===lang && d.Level===levelVal));
    
    // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø¯Ø§Ø¯Ù‡ Ø¬Ø¯ÛŒØ¯ (Ù‡Ù…ÛŒØ´Ù‡ ØªÙ…Ø§Ù… Ù…Ù‚Ø§Ø¯ÛŒØ± Ø°Ø®ÛŒØ±Ù‡ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯)
    savedData.push({
        Date:dateVal,
        Language:lang,
        Level:levelVal,
        DailyTarget:dailyTargetVal,
        Activities:activities,
        Exercises:exercises,
        TotalMinutes:total
    });
    
    localStorage.setItem("progressData", JSON.stringify(savedData));
    updateChart(currentChartPeriod);
    
    // Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† ÙØ±Ù… (ÙÙ‚Ø· Ù…Ù‚Ø§Ø¯ÛŒØ± Ø±Ø§ 0 Ú©Ù†ØŒ Ú†Ú©â€ŒØ¨Ø§Ú©Ø³â€ŒÙ‡Ø§ Ø±Ø§ ØªØºÛŒÛŒØ± Ù†Ø¯Ù‡)
    document.querySelectorAll('.time-container input[type="number"]').forEach(input => {
        input.value = 0;
    });
}

function generateDateRange(start, end){
    const dates=[];
    let d=new Date(start);
    while(d<=end){ dates.push(d.toISOString().split('T')[0]); d.setDate(d.getDate()+1); }
    return dates;
}

function getChartData(data, chartType) {
    // Ø¨Ø±Ø§ÛŒ ÙØ¹Ø§Ù„ÛŒØªâ€ŒÙ‡Ø§
    const activityIndexMap = {
        'listening': 0,
        'reading': 1,
        'whispering': 2,
        'recording': 3
    };
    
    // Ø¨Ø±Ø§ÛŒ ØªÙ…Ø±ÛŒÙ†â€ŒÙ‡Ø§
    const exerciseIndexMap = {
        'comprehension': 0,
        'grammar': 1,
        'conversation': 2,
        'writing': 3
    };
    
    if (chartType === 'total') {
        return data.map(d => d.TotalMinutes || 0);
    }
    
    if (activityIndexMap[chartType] !== undefined) {
        return data.map(d => (d.Activities && d.Activities[activityIndexMap[chartType]]) || 0);
    }
    
    if (exerciseIndexMap[chartType] !== undefined) {
        return data.map(d => (d.Exercises && d.Exercises[exerciseIndexMap[chartType]]) || 0);
    }
    
    return data.map(d => d.TotalMinutes || 0);
}

function getChartLabel(chartType) {
    const labels = {
        'total': 'Ú©Ù„ Ø¯Ù‚Ø§ÛŒÙ‚',
        'listening': 'ğŸ§ Ú¯ÙˆØ´ Ø¯Ø§Ø¯Ù†',
        'reading': 'ğŸ“– Ø¯Ø±Ú© Ù…Ø·Ù„Ø¨',
        'whispering': 'ğŸ—£ Ø²Ù…Ø²Ù…Ù‡',
        'recording': 'ğŸ“¢ Ø¨Ù„Ù†Ø¯ Ø®ÙˆØ§Ù†Ø¯Ù†',
        'comprehension': 'â“ Ø³ÙˆØ§Ù„Ø§Øª Ø¯Ø±Ú© Ù…Ø·Ù„Ø¨',
        'grammar': 'ğŸ“š Ø³ÙˆØ§Ù„Ø§Øª Ú¯Ø±Ø§Ù…Ø±',
        'conversation': 'ğŸ’¬ Ù…Ú©Ø§Ù„Ù…Ù‡',
        'writing': 'âœï¸ Ù†ÙˆØ´ØªÙ†',
        'target': 'Ù‡Ø¯Ù Ø±ÙˆØ²Ø§Ù†Ù‡'
    };
    return labels[chartType] || chartType;
}

function addSelectedChart() {
    const selectedValue = chartSelectEl.value;
    if (!selectedValue) return;
    
    // Ø§Ú¯Ø± Ù‚Ø¨Ù„Ø§Ù‹ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ø¯ØŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†
    if (!selectedCharts.includes(selectedValue)) {
        selectedCharts.push(selectedValue);
        updateSelectedChartsDisplay();
        updateChart(currentChartPeriod);
    }
    
    // Ø±ÛŒØ³Øª Ú©Ø±Ø¯Ù† Ø§Ù†ØªØ®Ø§Ø¨
    chartSelectEl.value = "";
}

function removeSelectedChart(chartType) {
    const index = selectedCharts.indexOf(chartType);
    if (index > -1) {
        selectedCharts.splice(index, 1);
        updateSelectedChartsDisplay();
        updateChart(currentChartPeriod);
    }
}

function updateSelectedChartsDisplay() {
    if (selectedCharts.length > 0) {
        selectedChartsContainer.style.display = 'block';
        selectedChartsList.innerHTML = '';
        
        selectedCharts.forEach(chartType => {
            const tag = document.createElement('div');
            tag.className = 'chart-tag';
            tag.innerHTML = `
                ${getChartLabel(chartType)}
                <button onclick="removeSelectedChart('${chartType}')">Ã—</button>
            `;
            tag.style.backgroundColor = chartColors[chartType] || chartColors.total;
            selectedChartsList.appendChild(tag);
        });
    } else {
        selectedChartsContainer.style.display = 'none';
    }
}

function updateChart(period){
    currentChartPeriod = period;

    if(languageEl.value && levelEl.value){
        chartInfo.textContent=`ğŸ“Š Ú¯Ø²Ø§Ø±Ø´ Ù¾ÛŒØ´Ø±ÙØª | Ø²Ø¨Ø§Ù†: ${languageEl.value} | Ø³Ø·Ø­: ${levelEl.value}`;
    } else chartInfo.textContent="";

    let lang = languageEl.value;
    let levelVal = levelEl.value;

    let data = savedData;
    if(lang && levelVal){
        data = savedData.filter(d=>d.Language===lang && d.Level===levelVal);
    }

    if(data.length===0){
        const today=new Date().toISOString().split('T')[0];
        data=[{
            Date:today, 
            TotalMinutes:0, 
            DailyTarget: parseInt(dailyTargetEl.value)||60, 
            Activities:[0,0,0,0], 
            Exercises:[0,0,0,0]
        }];
    }

    data = data.sort((a,b)=>new Date(a.Date)-new Date(b.Date));
    const allDates = generateDateRange(new Date(data[0].Date), new Date(data[data.length-1].Date));
    
    // Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ø§Ø¯Ù‡ Ú©Ø§Ù…Ù„ Ø¨Ø§ Ù…Ù‚Ø¯Ø§Ø± 0 Ø¨Ø±Ø§ÛŒ ØªØ§Ø±ÛŒØ®â€ŒÙ‡Ø§ÛŒ Ø§Ø² Ø¯Ø³Øª Ø±ÙØªÙ‡
    const fullData=allDates.map(d=>{
        const found=data.find(x=>x.Date===d);
        if(found){ 
            return {
                Date: d,
                TotalMinutes: found.TotalMinutes || 0,
                DailyTarget: found.DailyTarget || 60,
                Activities: found.Activities || [0,0,0,0],
                Exercises: found.Exercises || [0,0,0,0]
            }; 
        }
        else return {
            Date:d, 
            TotalMinutes:0, 
            DailyTarget:60,
            Activities: [0,0,0,0],
            Exercises: [0,0,0,0]
        };
    });

    let sliced=fullData;
    if(period==='weekly') sliced=fullData.slice(-7);
    if(period==='monthly') sliced=fullData.slice(-30);
    
    const ctx = document.getElementById("progressChart").getContext('2d');
    if(window.myChart) window.myChart.destroy();
    
    const datasets = [];
    
    // Ù‡Ù…ÛŒØ´Ù‡ Ù†Ù…ÙˆØ¯Ø§Ø± Ú©Ù„ Ø¯Ù‚Ø§ÛŒÙ‚ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯
    datasets.push({
        label: "Ú©Ù„ Ø¯Ù‚Ø§ÛŒÙ‚",
        data: sliced.map(d => d.TotalMinutes || 0),
        borderColor: chartColors.total,
        backgroundColor: "rgba(52, 152, 219, 0.1)",
        tension: 0.1,
        fill: true,
        pointRadius: 6,
        pointBackgroundColor: chartColors.total,
        borderWidth: 3
    });
    
    // Ù‡Ù…ÛŒØ´Ù‡ Ù†Ù…ÙˆØ¯Ø§Ø± Ù‡Ø¯Ù Ø±ÙˆØ²Ø§Ù†Ù‡ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ø´ÙˆØ¯
    datasets.push({
        label: "Ù‡Ø¯Ù Ø±ÙˆØ²Ø§Ù†Ù‡",
        data: sliced.map(d => d.DailyTarget || 60),
        borderColor: chartColors.target,
        backgroundColor: "rgba(192, 57, 43, 0.1)",
        borderDash: [5,5],
        tension: 0.1,
        fill: false,
        pointRadius: 6,
        pointBackgroundColor: chartColors.target,
        borderWidth: 2
    });
    
    // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù†Ù…ÙˆØ¯Ø§Ø±Ù‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡ ØªÙˆØ³Ø· Ú©Ø§Ø±Ø¨Ø±
    selectedCharts.forEach(chartType => {
        const chartData = getChartData(sliced, chartType);
        datasets.push({
            label: getChartLabel(chartType),
            data: chartData,
            borderColor: chartColors[chartType] || chartColors.total,
            backgroundColor: "rgba(52, 152, 219, 0.1)",
            tension: 0.1,
            fill: false,
            pointRadius: 5,
            pointBackgroundColor: chartColors[chartType] || chartColors.total,
            borderWidth: 2
        });
    });
    
    window.myChart = new Chart(ctx,{
        type:'line',
        data:{
            labels:sliced.map(d=>d.Date),
            datasets: datasets
        },
        options:{
            responsive:true,
            plugins:{
                legend:{ 
                    position:"top",
                    labels: {
                        font: {
                            size: 14,
                            family: "'Segoe UI Emoji', Tahoma, sans-serif"
                        },
                        padding: 20,
                        usePointStyle: true
                    }
                },
                tooltip: { 
                    enabled: true, 
                    backgroundColor: "rgba(0,0,0,0.7)",
                    titleFont: { size: 14 },
                    bodyFont: { size: 14 },
                    callbacks: { 
                        label: function(context){ 
                            return context.dataset.label + ": " + context.raw + " Ø¯Ù‚ÛŒÙ‚Ù‡"; 
                        } 
                    } 
                }
            },
            scales:{ 
                y:{ 
                    beginAtZero:true, 
                    title:{
                        display:true,
                        text:"Ø¯Ù‚ÛŒÙ‚Ù‡",
                        font: { size: 14, weight: 'bold' }
                    },
                    grid: {
                        color: "rgba(0,0,0,0.05)"
                    }
                }, 
                x:{ 
                    title:{
                        display:true,
                        text:"ØªØ§Ø±ÛŒØ®",
                        font: { size: 14, weight: 'bold' }
                    },
                    grid: {
                        color: "rgba(0,0,0,0.05)"
                    }
                } 
            }
        }
    });
}

function downloadCSV(){
    let csv = ["ØªØ§Ø±ÛŒØ®","Ø²Ø¨Ø§Ù†","Ø³Ø·Ø­","Ù‡Ø¯Ù Ø±ÙˆØ²Ø§Ù†Ù‡", ...activityNames, ...exerciseNames, "Ø¬Ù…Ø¹","Ø§Ø®ØªÙ„Ø§Ù"].join(";") + "\n";

    savedData.forEach(d=>{
        // Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² Ø§ÛŒÙ†Ú©Ù‡ Ù‡Ù…Ù‡ Ù…Ù‚Ø§Ø¯ÛŒØ± ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ù†Ø¯
        const activityValues = (d.Activities || [0,0,0,0]).map(n => n || 0);
        const exerciseValues = (d.Exercises || [0,0,0,0]).map(n => n || 0);

        const total = activityValues.reduce((a,b)=>a+b,0) + exerciseValues.reduce((a,b)=>a+b,0);
        const diff = (d.DailyTarget || 60) - total;

        const row = [
            d.Date,
            d.Language || "",
            d.Level || "",
            d.DailyTarget || 60,
            ...activityValues,
            ...exerciseValues,
            total,
            diff
        ].join(";");

        csv += row + "\n";
    });

    const csvContent = "\uFEFF" + csv;
    const a = document.createElement('a');
    a.href = URL.createObjectURL(new Blob([csvContent], { type: 'text/csv;charset=utf-8' }));
    a.download = "progress_data.csv";
    a.click();
}

function clearData(){
    if(confirm("Ø¢ÛŒØ§ ÙˆØ§Ù‚Ø¹Ø§Ù‹ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ù¾Ø§Ú© Ø´ÙˆÙ†Ø¯ØŸ")){
        savedData=[];
        selectedCharts = [];
        localStorage.removeItem("progressData");
        updateSelectedChartsDisplay();
        updateChart(currentChartPeriod);
    }
}

function uploadData(){
    const fileInput = document.getElementById('uploadFile');
    if(!fileInput.files.length){ 
        alert("Ù„Ø·ÙØ§Ù‹ ÛŒÚ© ÙØ§ÛŒÙ„ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯."); 
        return; 
    }

    const file = fileInput.files[0];
    if(file.type !== "text/csv" && !file.name.endsWith(".csv")){
        alert("ÙØ±Ù…Øª ÙØ§ÛŒÙ„ Ù…Ø¹ØªØ¨Ø± Ù†ÛŒØ³Øª. Ù„Ø·ÙØ§Ù‹ ÛŒÚ© ÙØ§ÛŒÙ„ CSV Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯."); 
        return; 
    }

    const reader = new FileReader();
    reader.onload = function(e){
        try{
            const text = e.target.result.replace(/^\uFEFF/, '').trim();
            const lines = text.split("\n");

            const header = lines.shift().split(";");
            if(header.length < 12 || header[0]!=="ØªØ§Ø±ÛŒØ®"){ 
                throw "ÙØ±Ù…Øª CSV Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª"; 
            }

            const newData = [];

            lines.forEach(line=>{
                const parts = line.split(";");

                if(parts.length < header.length) throw "ÙØ±Ù…Øª CSV Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª";

                // Ø®ÙˆØ§Ù†Ø¯Ù† Ù…Ù‚Ø§Ø¯ÛŒØ± Ø¨Ø§ Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´ÙØ±Ø¶ 0
                const activities = parts.slice(4, 8).map(n => parseInt(n)||0);
                const exercises = parts.slice(8, 12).map(n => parseInt(n)||0);

                newData.push({
                    Date: parts[0],
                    Language: parts[1] || "",
                    Level: parts[2] || "",
                    DailyTarget: parseInt(parts[3])||60,
                    Activities: activities,
                    Exercises: exercises,
                    TotalMinutes: activities.reduce((a,b)=>a+b,0) + exercises.reduce((a,b)=>a+b,0)
                });
            });

            savedData = newData;
            localStorage.setItem("progressData", JSON.stringify(savedData));
            updateChart(currentChartPeriod);
            alert("âœ… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù†Ø¯.");
        } catch(err){
            alert("âŒ Ø®Ø·Ø§ Ø¯Ø± ÙØ±Ù…Øª ÙØ§ÛŒÙ„ CSV: "+err);
        }
    };
    reader.readAsText(file);
}

// Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§ÙˆÙ„ÛŒÙ‡ Ù†Ù…ÙˆØ¯Ø§Ø±
document.addEventListener('DOMContentLoaded', function() {
    updateChart('weekly');
    
    // Ø§ÙØ²ÙˆØ¯Ù† Ø§ÙÚ©Øª Ø§Ø³Ú©Ø±ÙˆÙ„ Ø¨Ø±Ø§ÛŒ Ù†ÙˆØ§Ø± Ø¹Ù†ÙˆØ§Ù†
    window.addEventListener('scroll', () => {
        const header = document.querySelector('.fixed-header');
        if (window.scrollY > 50) {
            header.style.boxShadow = '0 6px 25px rgba(0, 0, 0, 0.4)';
            header.style.height = '65px';
        } else {
            header.style.boxShadow = '0 4px 20px rgba(0, 0, 0, 0.3)';
            header.style.height = '70px';
        }
    });
});
</script>
</div>
</body>
</html>